<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šæ ‡ç­¾é¡µé¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .content-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
        }

        .content-section {
            margin-bottom: 40px;
        }

        .card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
        }

        .card h3 {
            color: #007bff;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #495057;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #1e7e34;
        }

        .result-box {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
            min-height: 100px;
            white-space: pre-wrap;
            font-family: monospace;
        }

        .api-list {
            list-style: none;
        }

        .api-item {
            background: white;
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .api-method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-right: 10px;
        }

        .method-get {
            background: #d4edda;
            color: #155724;
        }

        .method-post {
            background: #d1ecf1;
            color: #0c5460;
        }

        .log-container {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            max-height: 400px;
            overflow-y: auto;
        }

        .log-line {
            margin-bottom: 5px;
            padding: 2px 0;
        }

        .log-time {
            color: #68d391;
        }

        .log-level {
            font-weight: bold;
        }

        .log-info { color: #63b3ed; }
        .log-warning { color: #f6e05e; }
        .log-error { color: #fc8181; }

        .footer {
            text-align: center;
            margin-top: 30px;
            color: white;
            opacity: 0.8;
        }

        .text-section {
            margin-bottom: 25px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }

        .text-section h4 {
            color: #007bff;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .text-section p {
            line-height: 1.6;
            margin-bottom: 8px;
            color: #495057;
        }

        /* æ–°å¢çš„HTMLæ ‡ç­¾æ ·å¼ */
        h1, h2, h3, h4, h5, h6 {
            margin: 20px 0 10px 0;
            color: #2c3e50;
        }

        h1 { font-size: 2.5rem; color: #e74c3c; }
        h2 { font-size: 2rem; color: #3498db; }
        h3 { font-size: 1.75rem; color: #2ecc71; }
        h4 { font-size: 1.5rem; color: #f39c12; }
        h5 { font-size: 1.25rem; color: #9b59b6; }
        h6 { font-size: 1rem; color: #34495e; }

        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }

        blockquote {
            border-left: 4px solid #007bff;
            margin: 20px 0;
            padding: 10px 20px;
            background: #f8f9fa;
            font-style: italic;
        }

        code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d63384;
        }

        mark {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }

        abbr {
            border-bottom: 1px dotted #6c757d;
            cursor: help;
        }

        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        li {
            margin: 5px 0;
            line-height: 1.6;
        }

        dl {
            margin: 15px 0;
        }

        dt {
            font-weight: bold;
            color: #495057;
            margin-top: 10px;
        }

        dd {
            margin: 5px 0 10px 20px;
            color: #6c757d;
        }

        article {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        section {
            margin: 20px 0;
        }

        aside {
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }

        details {
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 10px;
            margin: 15px 0;
        }

        summary {
            cursor: pointer;
            font-weight: bold;
            color: #007bff;
            padding: 5px;
        }

        summary:hover {
            background: #f8f9fa;
        }

        figure {
            border: 2px dashed #dee2e6;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            border-radius: 5px;
        }

        figcaption {
            font-style: italic;
            color: #6c757d;
            margin-top: 10px;
        }

        address {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            font-style: normal;
            line-height: 1.6;
        }

        a {
            color: #007bff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* ç¿»è¯‘åŠŸèƒ½æ ·å¼ */
        .translation-controls {
            margin-top: 20px;
            text-align: center;
        }

        .btn-translate {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }

        .btn-translate:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
        }

        .btn-translate:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-restore {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
        }

        .btn-restore:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
        }

        .translation-status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-weight: 500;
            min-height: 20px;
        }

        .status-loading {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .translated-content {
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            padding: 2px 4px;
            border-radius: 3px;
        }

        /* æŸ¥çœ‹æºç æŒ‰é’®æ ·å¼ */
        .source-code-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .btn-source {
            background: #6f42c1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(111, 66, 193, 0.3);
        }

        .btn-source:hover {
            background: #5a32a3;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(111, 66, 193, 0.4);
        }

        /* æºç æŸ¥çœ‹å™¨æ ·å¼ */
        .source-viewer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            display: none;
            overflow: auto;
        }

        .source-viewer-content {
            background: #1e1e1e;
            color: #d4d4d4;
            margin: 20px;
            border-radius: 10px;
            position: relative;
            max-height: calc(100vh - 40px);
            overflow: auto;
        }

        .source-viewer-header {
            background: #2d2d30;
            padding: 15px 20px;
            border-radius: 10px 10px 0 0;
            border-bottom: 1px solid #3e3e42;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .source-viewer-title {
            color: #ffffff;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .source-viewer-close {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s ease;
        }

        .source-viewer-close:hover {
            background: #c0392b;
        }

        .source-viewer-body {
            padding: 0;
        }

        .source-code {
            background: #1e1e1e;
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            padding: 20px;
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            border-radius: 0 0 10px 10px;
        }

        .source-code .tag {
            color: #569cd6;
        }

        .source-code .attr-name {
            color: #9cdcfe;
        }

        .source-code .attr-value {
            color: #ce9178;
        }

        .source-code .comment {
            color: #6a9955;
            font-style: italic;
        }

        .source-code .string {
            color: #ce9178;
        }

        .source-code .keyword {
            color: #c586c0;
        }

        .copy-btn {
            position: absolute;
            top: 70px;
            right: 30px;
            background: #007acc;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background 0.3s ease;
        }

        .copy-btn:hover {
            background: #005a9e;
        }

        /* ç¡®è®¤å¼¹çª—æ ·å¼ */
        .confirm-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .confirm-modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .confirm-modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .confirm-modal-message {
            font-size: 1rem;
            color: #555;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .confirm-modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .confirm-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
        }

        .confirm-btn-yes {
            background: #28a745;
            color: white;
        }

        .confirm-btn-yes:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }

        .confirm-btn-no {
            background: #6c757d;
            color: white;
        }

        .confirm-btn-no:hover {
            background: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <!-- æŸ¥çœ‹æºç æŒ‰é’® -->
            <div class="source-code-btn">
                <button id="viewSourceBtn" class="btn btn-source" onclick="viewSourceCode()">
                    ğŸ“„ æŸ¥çœ‹æºç 
                </button>
            </div>

            <h1>ğŸ“š å¤šæ ‡ç­¾å†…å®¹å±•ç¤º</h1>
            <p>å…³äºåˆ†ç»„ä¸å¼‚æ­¥çš„ä»£ç å¯æŸ¥çœ‹å³ä¸Šè§’çš„æŸ¥çœ‹æºç </p>

            <!-- ç¿»è¯‘æ§åˆ¶æŒ‰é’® -->
            <div class="translation-controls">
                <button id="translateBtn" class="btn btn-translate" onclick="translateAllContent()">
                    ğŸ”„ æ‰¹é‡ç¿»è¯‘ï¼ˆåˆ†ç»„å¹¶å‘ï¼‰
                </button>
                <button id="translateAsyncBtn" class="btn btn-translate" onclick="translateAllContentAsync()" style="margin-left: 10px;">
                    âš¡ å¼‚æ­¥ç¿»è¯‘ï¼ˆå®æ—¶æ˜¾ç¤ºï¼‰
                </button>
                <button id="restoreBtn" class="btn btn-restore" onclick="restoreOriginalContent()" style="display: none;">
                    ğŸ”™ æ¢å¤åŸå§‹ä¸­æ–‡å†…å®¹
                </button>
                <div id="translationStatus" class="translation-status"></div>
            </div>
        </div>

        <div class="content-container">
                <!-- æ–‡æœ¬æ ¼å¼æ ‡ç­¾å±•ç¤º -->
                <div class="content-section">
                    <h1>è¿™æ˜¯ä¸€çº§æ ‡é¢˜ - å±•ç¤ºç½‘é¡µçš„ä¸»è¦ä¸»é¢˜</h1>
                    <h2>è¿™æ˜¯äºŒçº§æ ‡é¢˜ - ç”¨äºç« èŠ‚åˆ’åˆ†</h2>
                    <h3>è¿™æ˜¯ä¸‰çº§æ ‡é¢˜ - ç”¨äºå°èŠ‚æ ‡é¢˜</h3>
                    <h4>è¿™æ˜¯å››çº§æ ‡é¢˜ - ç”¨äºå­å°èŠ‚</h4>
                    <h5>è¿™æ˜¯äº”çº§æ ‡é¢˜ - ç”¨äºæ›´ç»†çš„åˆ†ç±»</h5>
                    <h6>è¿™æ˜¯å…­çº§æ ‡é¢˜ - æœ€å°çš„æ ‡é¢˜çº§åˆ«</h6>

                    <p>è¿™æ˜¯ä¸€ä¸ªæ®µè½æ ‡ç­¾ï¼ŒåŒ…å«äº†æ™®é€šçš„æ–‡æœ¬å†…å®¹ã€‚æ®µè½æ˜¯HTMLä¸­æœ€å¸¸ç”¨çš„æ–‡æœ¬å®¹å™¨ã€‚</p>
                    <p>è¿™æ˜¯å¦ä¸€ä¸ªæ®µè½ï¼Œå±•ç¤ºäº†æ®µè½ä¹‹é—´çš„é—´è·æ•ˆæœã€‚</p>

                    <br>è¿™é‡Œä½¿ç”¨äº†æ¢è¡Œæ ‡ç­¾
                    <br>å¯ä»¥çœ‹åˆ°æ–‡æœ¬æ¢åˆ°äº†æ–°çš„ä¸€è¡Œ

                    <hr>

                    <pre>è¿™æ˜¯é¢„æ ¼å¼åŒ–æ–‡æœ¬æ ‡ç­¾
    å®ƒä¼šä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œ
        ç”šè‡³æ˜¯ç¼©è¿›ä¹Ÿä¼šè¢«ä¿ç•™
            éå¸¸é€‚åˆæ˜¾ç¤ºä»£ç </pre>

                    <blockquote>
                        è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨å—ï¼Œé€šå¸¸ç”¨æ¥å¼•ç”¨ä»–äººçš„è¯è¯­æˆ–è€…é‡è¦çš„æ–‡æœ¬å†…å®¹ã€‚
                        å¼•ç”¨å—ä¼šæœ‰ç‰¹æ®Šçš„æ ·å¼æ¥åŒºåˆ«äºæ™®é€šæ–‡æœ¬ã€‚
                    </blockquote>

                    <p>è¿™é‡Œæœ‰ä¸€äº›<code>å†…è”ä»£ç </code>çš„ç¤ºä¾‹ï¼Œç”¨äºåœ¨æ–‡æœ¬ä¸­æ’å…¥ä»£ç ç‰‡æ®µã€‚</p>

                    <p>æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾ï¼š<em>è¿™æ˜¯å¼ºè°ƒæ–‡æœ¬</em>ï¼Œ<strong>è¿™æ˜¯é‡è¦æ–‡æœ¬</strong>ï¼Œ<i>è¿™æ˜¯æ–œä½“æ–‡æœ¬</i>ï¼Œ<b>è¿™æ˜¯ç²—ä½“æ–‡æœ¬</b>ã€‚</p>

                    <p>æ›´å¤šæ ¼å¼ï¼š<u>è¿™æ˜¯ä¸‹åˆ’çº¿æ–‡æœ¬</u>ï¼Œ<s>è¿™æ˜¯åˆ é™¤çº¿æ–‡æœ¬</s>ï¼Œè¿™æ˜¯<sub>ä¸‹æ ‡æ–‡æœ¬</sub>ï¼Œè¿™æ˜¯<sup>ä¸Šæ ‡æ–‡æœ¬</sup>ã€‚</p>

                    <p><small>è¿™æ˜¯å°å·æ–‡æœ¬ï¼Œé€šå¸¸ç”¨äºç‰ˆæƒä¿¡æ¯æˆ–è€…æ³¨é‡Š</small></p>

                    <p><abbr title="HyperText Markup Language">HTML</abbr>æ˜¯ç½‘é¡µæ ‡è®°è¯­è¨€çš„ç¼©å†™ã€‚</p>

                    <p>æ­£å¦‚<cite>ã€ŠHTMLæƒå¨æŒ‡å—ã€‹</cite>ä¸€ä¹¦ä¸­æ‰€è¯´çš„é‚£æ ·ã€‚</p>

                    <p>å­”å­è¯´è¿‡ï¼š<q>å­¦è€Œæ—¶ä¹ ä¹‹ï¼Œä¸äº¦è¯´ä¹</q>ã€‚</p>

                    <p>è¿™ç¯‡æ–‡ç« å‘å¸ƒäº<time datetime="2024-01-15">2024å¹´1æœˆ15æ—¥</time>ã€‚</p>

                    <p>è¿™æ®µæ–‡æœ¬ä¸­æœ‰<mark>é«˜äº®æ ‡è®°çš„é‡è¦å†…å®¹</mark>éœ€è¦æ³¨æ„ã€‚</p>
                </div>

                <!-- åˆ—è¡¨æ ‡ç­¾å±•ç¤º -->
                <div class="content-section">
                    <h2>åˆ—è¡¨æ ‡ç­¾å±•ç¤ºåŒºåŸŸ</h2>

                    <h3>æ— åºåˆ—è¡¨ç¤ºä¾‹</h3>
                    <ul>
                        <li>è¿™æ˜¯æ— åºåˆ—è¡¨çš„ç¬¬ä¸€é¡¹</li>
                        <li>è¿™æ˜¯æ— åºåˆ—è¡¨çš„ç¬¬äºŒé¡¹</li>
                        <li>è¿™æ˜¯æ— åºåˆ—è¡¨çš„ç¬¬ä¸‰é¡¹
                            <ul>
                                <li>åµŒå¥—åˆ—è¡¨é¡¹ç›®ä¸€</li>
                                <li>åµŒå¥—åˆ—è¡¨é¡¹ç›®äºŒ</li>
                            </ul>
                        </li>
                        <li>è¿™æ˜¯æ— åºåˆ—è¡¨çš„ç¬¬å››é¡¹</li>
                    </ul>

                    <h3>æœ‰åºåˆ—è¡¨ç¤ºä¾‹</h3>
                    <ol>
                        <li>è¿™æ˜¯æœ‰åºåˆ—è¡¨çš„ç¬¬ä¸€æ­¥</li>
                        <li>è¿™æ˜¯æœ‰åºåˆ—è¡¨çš„ç¬¬äºŒæ­¥</li>
                        <li>è¿™æ˜¯æœ‰åºåˆ—è¡¨çš„ç¬¬ä¸‰æ­¥
                            <ol>
                                <li>å­æ­¥éª¤A</li>
                                <li>å­æ­¥éª¤B</li>
                            </ol>
                        </li>
                        <li>è¿™æ˜¯æœ‰åºåˆ—è¡¨çš„ç¬¬å››æ­¥</li>
                    </ol>

                    <h3>å®šä¹‰åˆ—è¡¨ç¤ºä¾‹</h3>
                    <dl>
                        <dt>HTML</dt>
                        <dd>è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œç”¨äºåˆ›å»ºç½‘é¡µçš„æ ‡å‡†æ ‡è®°è¯­è¨€</dd>
                        <dd>ç”±è’‚å§†Â·ä¼¯çº³æ–¯-æåœ¨1990å¹´å‘æ˜</dd>

                        <dt>CSS</dt>
                        <dd>å±‚å æ ·å¼è¡¨ï¼Œç”¨äºæè¿°HTMLæ–‡æ¡£çš„æ ·å¼</dd>
                        <dd>å¯ä»¥æ§åˆ¶ç½‘é¡µçš„å¸ƒå±€ã€é¢œè‰²ã€å­—ä½“ç­‰è§†è§‰æ•ˆæœ</dd>

                        <dt>JavaScript</dt>
                        <dd>ä¸€ç§é«˜çº§çš„ã€è§£é‡Šå‹çš„ç¼–ç¨‹è¯­è¨€</dd>
                        <dd>ä¸»è¦ç”¨äºç½‘é¡µçš„äº¤äº’åŠŸèƒ½å¼€å‘</dd>
                    </dl>
                </div>

                <!-- æ›´å¤šHTMLæ ‡ç­¾å±•ç¤º -->
                <div class="content-section">
                    <h2>ç»¼åˆæ ‡ç­¾å±•ç¤ºåŒºåŸŸ</h2>

                    <article>
                        <header>
                            <h3>è¿™æ˜¯ä¸€ä¸ªæ–‡ç« æ ‡é¢˜</h3>
                            <p>å‘å¸ƒäº <time datetime="2024-01-15">2024å¹´1æœˆ15æ—¥</time> ä½œè€…ï¼š<cite>å¼ ä¸‰</cite></p>
                        </header>

                        <section>
                            <h4>ç¬¬ä¸€ç« èŠ‚</h4>
                            <p>è¿™æ˜¯æ–‡ç« çš„ç¬¬ä¸€ä¸ªæ®µè½ï¼ŒåŒ…å«äº†<strong>é‡è¦çš„ä¿¡æ¯</strong>å’Œ<em>å¼ºè°ƒçš„å†…å®¹</em>ã€‚</p>
                            <p>è¿™é‡Œæœ‰ä¸€ä¸ª<a href="#example">é“¾æ¥ç¤ºä¾‹</a>ï¼Œè¿˜æœ‰ä¸€äº›<code>ä»£ç ç‰‡æ®µ</code>ã€‚</p>
                        </section>

                        <section>
                            <h4>ç¬¬äºŒç« èŠ‚</h4>
                            <p>è¿™ä¸ªæ®µè½å±•ç¤ºäº†æ›´å¤šçš„æ–‡æœ¬æ ¼å¼ï¼š</p>
                            <ul>
                                <li><b>ç²—ä½“æ–‡æœ¬</b>å’Œ<i>æ–œä½“æ–‡æœ¬</i></li>
                                <li><u>ä¸‹åˆ’çº¿æ–‡æœ¬</u>å’Œ<s>åˆ é™¤çº¿æ–‡æœ¬</s></li>
                                <li>æ•°å­¦å…¬å¼ï¼šH<sub>2</sub>O å’Œ E=mc<sup>2</sup></li>
                                <li><small>å°å·æ–‡æœ¬ç”¨äºæ³¨é‡Š</small></li>
                            </ul>
                        </section>

                        <aside>
                            <h5>ä¾§è¾¹æ ä¿¡æ¯</h5>
                            <p>è¿™æ˜¯ä¸€ä¸ªä¾§è¾¹æ ï¼Œé€šå¸¸åŒ…å«ç›¸å…³ä½†ä¸æ˜¯ä¸»è¦çš„ä¿¡æ¯ã€‚</p>
                            <blockquote>
                                <p>è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼š"<q>å­¦è€Œæ—¶ä¹ ä¹‹ï¼Œä¸äº¦è¯´ä¹ï¼Ÿ</q>"</p>
                                <footer>â€”â€” <cite>å­”å­ã€Šè®ºè¯­ã€‹</cite></footer>
                            </blockquote>
                        </aside>

                        <footer>
                            <p><small>æ–‡ç« ç»“æŸï¼Œç‰ˆæƒæ‰€æœ‰ &copy; 2025</small></p>
                        </footer>
                    </article>

                    <hr>

                    <details>
                        <summary>ç‚¹å‡»å±•å¼€æ›´å¤šå†…å®¹</summary>
                        <p>è¿™æ˜¯ä¸€ä¸ªå¯æŠ˜å çš„å†…å®¹åŒºåŸŸï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»æ ‡é¢˜æ¥å±•å¼€æˆ–æ”¶èµ·å†…å®¹ã€‚</p>
                        <p>è¿™é‡Œå¯ä»¥æ”¾ç½®è¯¦ç»†çš„è¯´æ˜ä¿¡æ¯æˆ–è€…é¢å¤–çš„å†…å®¹ã€‚</p>
                    </details>

                    <hr>

                    <figure>
                        <figcaption>å›¾è¡¨è¯´æ˜ï¼šè¿™é‡Œæœ¬æ¥åº”è¯¥æœ‰ä¸€ä¸ªå›¾ç‰‡</figcaption>
                        <p>[å›¾ç‰‡å ä½ç¬¦ - å±•ç¤ºfigureå’Œfigcaptionæ ‡ç­¾çš„ä½¿ç”¨]</p>
                    </figure>

                    <address>
                        è”ç³»åœ°å€ï¼š<br>
                        å—å®å¸‚é’ç§€åŒº<br>
                        é‚®ç¼–ï¼š999999<br>
                        ç”µè¯ï¼š010-12345678
                    </address>
                </div>
        </div>

        <div class="footer">
            <p>&copy; 2025 å¤šæ–‡å­—å†…å®¹å±•ç¤ºå¹³å° | ä¸°å¯Œçš„æ–‡å­—å†…å®¹åˆ†ç±»å±•ç¤º</p>
        </div>
    </div>

    <!-- ç¡®è®¤å¼¹çª— -->
    <div id="confirmModal" class="confirm-modal">
        <div class="confirm-modal-content">
            <div class="confirm-modal-title">ğŸ”’ æŸ¥çœ‹æºç ä¹‹å‰-è¯·å¬å¬æˆ‘çš„æ•…äº‹ğŸ¦‚</div>
            <div class="confirm-modal-message">
                æˆ‘æœ¬åç«¯å·¥ç¨‹å¸ˆï¼Œå¥ˆä½•å¤©ä¸æµ‹é£äº‘ï¼Œ<br>
                ä¸€è§‰é†’æ¥ç«Ÿé‡ç”Ÿï¼Œå¼€å±€ç«Ÿæ˜¯â€”â€”å°å­¦ç”Ÿï¼<br>
                ä»£ç è®°å¿†å…¨ä¿ç•™ï¼Œæ‰‹é€Ÿè„‘é€Ÿå´å½’é›¶ï¼Œ<br>
                é¢å¯¹ä¹ä¹ä¹˜æ³•è¡¨ï¼Œè¡€å‹ç›´æ¥å¾€ä¸Šå†²ã€‚<br>
                â€œè¿™é¢˜å¤ªç®€å•ï¼Œæˆ‘è¦å†™ Springï¼â€<br>
                è€å¸ˆæ€’æ‹è®²å°ï¼šâ€œä½ ä½œä¸šå‘¢ï¼Ÿäº¤ä¸Šæ¥ï¼â€<br>
                å‰ç”Ÿ CRUD ç§°ç‹è€…ï¼Œä»Šä¸–æ‹¼éŸ³ä¸è¿‡å…³ï¼Œ<br>
                Redis ç¼“å­˜å…¨ç²¾é€šï¼Œå¥ˆä½•å¬å†™å…¨ç©å®Œã€‚<br>
                äº§å“ç»ç†å˜åŒæ¡Œï¼Œå¤©å¤©ç”»é¥¼ä¸æ¶ˆåœï¼Œ<br>
                â€œè¿™æ¬¡éœ€æ±‚å¾ˆç®€å•ï¼Œå°±æ”¹äº”ä¸ªå°åŠŸèƒ½ï¼â€<br>
                æµ‹è¯•å¦¹å­æ˜¯ç­é•¿ï¼Œçœ¼ç¥çŠ€åˆ©å¦‚åˆ€é”‹ï¼Œ<br>
                â€œä½ ä»£ç åˆæœ‰ Bugï¼Œæ”¾å­¦åˆ«èµ°å†æ”¹é€šï¼â€<br>
                é‡æ´»ä¸€ä¸–å¿ƒå¥½ç´¯ï¼Œåªæƒ³èººå¹³åšå’¸é±¼ï¼Œ<br>
                è°çŸ¥å°å­¦å¥¥æ•°é¢˜ï¼Œç«Ÿæ¯”é«˜å¹¶å‘è¿˜å·ï¼<br>
                ç½¢ç½¢ç½¢ï¼Œè¿™ä¸€ä¸–ï¼Œå®šè¦æ´»å‡ºæ–°é«˜åº¦â€”â€”<br>
                å…ˆè€ƒå¹´çº§ç¬¬ä¸€åï¼Œå†å†™ä¸ªæ“ä½œç³»ç»Ÿï¼<br>
                <strong>Væˆ‘50ç»§ç»­æ”¶å¬æˆ‘çš„æ•…äº‹â¤</strong>
            </div>
            <div class="confirm-modal-buttons">
                <button class="confirm-btn confirm-btn-no" onclick="cancelViewSource()">
                    âŒ æˆ‘çœŸçš„æ²¡é’±çº³
                </button>
                <button class="confirm-btn confirm-btn-yes" onclick="confirmViewSource()">
                    âœ… å¯ä»¥
                </button>
            </div>
        </div>
    </div>

    <!-- æºç æŸ¥çœ‹å™¨ -->
    <div id="sourceViewer" class="source-viewer">
        <div class="source-viewer-content">
            <div class="source-viewer-header">
                <div class="source-viewer-title">ğŸ“„ é¡µé¢æºç </div>
                <button class="source-viewer-close" onclick="closeSourceViewer()">âœ• å…³é—­</button>
            </div>
            <button class="copy-btn" onclick="copySourceCode()">ğŸ“‹ å¤åˆ¶ä»£ç </button>
            <div class="source-viewer-body">
                <pre id="sourceCode" class="source-code"></pre>
            </div>
        </div>
    </div>

    <script>
        // å­˜å‚¨åŸå§‹å†…å®¹
        let originalContent = {};
        let isTranslated = false;

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('å¤šæ–‡å­—å†…å®¹å±•ç¤ºé¡µé¢åŠ è½½å®Œæˆ');
            // ä¿å­˜åŸå§‹å†…å®¹
            saveOriginalContent();
        });

        // ä¿å­˜åŸå§‹å†…å®¹
        function saveOriginalContent() {
            const textElements = document.querySelectorAll('h1, h2, h3, h4, h5, h6, p, li, dt, dd, blockquote, pre, code, em, strong, i, b, u, s, small, abbr, cite, q, time, mark, figcaption, address');

            textElements.forEach((element, index) => {
                originalContent[index] = {
                    element: element,
                    originalText: element.innerHTML,
                    tagName: element.tagName.toLowerCase()
                };
            });

            console.log(`å·²ä¿å­˜ ${Object.keys(originalContent).length} ä¸ªå…ƒç´ çš„åŸå§‹å†…å®¹`);
        }

        // ç¿»è¯‘æ‰€æœ‰å†…å®¹ï¼ˆæ‰¹é‡æ¨¡å¼ï¼‰
        async function translateAllContent() {
            if (isTranslated) {
                showStatus('å†…å®¹å·²ç»ç¿»è¯‘è¿‡äº†', 'error');
                return;
            }

            const translateBtn = document.getElementById('translateBtn');
            const restoreBtn = document.getElementById('restoreBtn');

            // ç¦ç”¨æŒ‰é’®å¹¶æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            translateBtn.disabled = true;
            translateBtn.innerHTML = 'ğŸ”„ ç¿»è¯‘ä¸­...';
            showStatus('æ­£åœ¨æ”¶é›†ä¸­æ–‡å†…å®¹å¹¶æ‰¹é‡ç¿»è¯‘...', 'loading');

            try {
                // æ”¶é›†æ‰€æœ‰éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬
                const textsToTranslate = [];
                for (let index in originalContent) {
                    const item = originalContent[index];
                    const textContent = item.element.textContent.trim();

                    // åªç¿»è¯‘åŒ…å«ä¸­æ–‡çš„å†…å®¹
                    if (containsChinese(textContent)) {
                        textsToTranslate.push({
                            index: index,
                            text: textContent,
                            element: item.element
                        });
                    }
                }

                console.log(`æ‰¾åˆ° ${textsToTranslate.length} ä¸ªåŒ…å«ä¸­æ–‡çš„å…ƒç´ éœ€è¦ç¿»è¯‘`);

                if (textsToTranslate.length === 0) {
                    showStatus('æ²¡æœ‰æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„ä¸­æ–‡å†…å®¹', 'error');
                    translateBtn.disabled = false;
                    translateBtn.innerHTML = 'ğŸ”„ ç¿»è¯‘æ‰€æœ‰ä¸­æ–‡å†…å®¹ä¸ºè‹±æ–‡';
                    return;
                }

                // å‡†å¤‡æ‰¹é‡ç¿»è¯‘çš„æ–‡æœ¬
                const batchTexts = textsToTranslate.map(item => item.text);

                showStatus(`æ­£åœ¨æ‰¹é‡ç¿»è¯‘ ${batchTexts.length} ä¸ªæ–‡æœ¬ç‰‡æ®µ...`, 'loading');

                // è°ƒç”¨æ‰¹é‡ç¿»è¯‘æ¥å£
                const translatedResults = await batchTranslateTexts(batchTexts);

                console.log('æ‰¹é‡ç¿»è¯‘æœ€ç»ˆç»“æœ:', translatedResults);
                console.log('é¢„æœŸç»“æœæ•°é‡:', batchTexts.length, 'å®é™…ç»“æœæ•°é‡:', translatedResults ? translatedResults.length : 0);

                if (translatedResults && translatedResults.length > 0) {
                    // åº”ç”¨ç¿»è¯‘ç»“æœï¼ˆå…è®¸éƒ¨åˆ†æˆåŠŸï¼‰
                    let successCount = 0;
                    let appliedCount = 0;

                    for (let i = 0; i < textsToTranslate.length && i < translatedResults.length; i++) {
                        const item = textsToTranslate[i];
                        const translatedText = translatedResults[i];

                        console.log(`åº”ç”¨ç¿»è¯‘ç»“æœ ${i + 1}:`, translatedText);

                        if (translatedText && translatedText.trim()) {
                            item.element.innerHTML = translatedText;
                            item.element.classList.add('translated-content');
                            successCount++;
                        }
                        appliedCount++;
                    }

                    // å¤„ç†å‰©ä½™æœªç¿»è¯‘çš„å…ƒç´ ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
                    if (translatedResults.length < textsToTranslate.length) {
                        console.warn(`æœ‰ ${textsToTranslate.length - translatedResults.length} ä¸ªå…ƒç´ æœªèƒ½è·å¾—ç¿»è¯‘ç»“æœ`);
                    }

                    if (successCount > 0) {
                        showStatus(`æ‰¹é‡ç¿»è¯‘å®Œæˆï¼æˆåŠŸç¿»è¯‘ ${successCount}/${textsToTranslate.length} ä¸ªå…ƒç´ `, 'success');
                        isTranslated = true;
                        restoreBtn.style.display = 'inline-block';
                    } else {
                        showStatus('ç¿»è¯‘å®Œæˆä½†æ²¡æœ‰æœ‰æ•ˆçš„ç¿»è¯‘ç»“æœ', 'error');
                    }
                } else {
                    console.error('æ‰¹é‡ç¿»è¯‘ç»“æœéªŒè¯å¤±è´¥');
                    console.error('translatedResults:', translatedResults);
                    console.error('batchTexts.length:', batchTexts.length);
                    showStatus('æ‰¹é‡ç¿»è¯‘å¤±è´¥ï¼Œæ²¡æœ‰è·å¾—æœ‰æ•ˆçš„ç¿»è¯‘ç»“æœ', 'error');
                }

            } catch (error) {
                console.error('æ‰¹é‡ç¿»è¯‘è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:', error);
                showStatus('ç¿»è¯‘å¤±è´¥: ' + error.message, 'error');
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                translateBtn.disabled = false;
                translateBtn.innerHTML = 'ğŸ”„ ç¿»è¯‘æ‰€æœ‰ä¸­æ–‡å†…å®¹ä¸ºè‹±æ–‡';
            }
        }

        // å®Œå…¨å¼‚æ­¥ç¿»è¯‘ï¼ˆå®æ—¶æ˜¾ç¤ºç»“æœï¼‰
        async function translateAllContentAsync() {
            if (isTranslated) {
                showStatus('å†…å®¹å·²ç»ç¿»è¯‘è¿‡äº†', 'error');
                return;
            }

            const translateBtn = document.getElementById('translateBtn');
            const translateAsyncBtn = document.getElementById('translateAsyncBtn');
            const restoreBtn = document.getElementById('restoreBtn');

            // ç¦ç”¨æŒ‰é’®
            translateBtn.disabled = true;
            translateAsyncBtn.disabled = true;
            translateAsyncBtn.innerHTML = 'âš¡ ç¿»è¯‘ä¸­...';
            showStatus('å¯åŠ¨å¼‚æ­¥ç¿»è¯‘ï¼Œç»“æœå°†å®æ—¶æ˜¾ç¤º...', 'loading');

            try {
                // æ”¶é›†æ‰€æœ‰éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬
                const textsToTranslate = [];
                for (let index in originalContent) {
                    const item = originalContent[index];
                    const textContent = item.element.textContent.trim();

                    if (containsChinese(textContent)) {
                        textsToTranslate.push({
                            index: index,
                            text: textContent,
                            element: item.element
                        });
                    }
                }

                if (textsToTranslate.length === 0) {
                    showStatus('æ²¡æœ‰æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„ä¸­æ–‡å†…å®¹', 'error');
                    return;
                }

                console.log(`å¯åŠ¨å¼‚æ­¥ç¿»è¯‘ ${textsToTranslate.length} ä¸ªå…ƒç´ `);

                let completedCount = 0;
                let successCount = 0;

                // åˆ›å»ºæ‰€æœ‰å¼‚æ­¥ç¿»è¯‘ä»»åŠ¡
                const translatePromises = textsToTranslate.map(async (item, index) => {
                    try {
                        // ä¸ºæ¯ä¸ªå…ƒç´ æ·»åŠ ç¿»è¯‘ä¸­çš„è§†è§‰æç¤º
                        item.element.style.opacity = '0.6';
                        item.element.style.backgroundColor = '#fff3cd';

                        const translatedText = await translateSingleText(item.text);

                        if (translatedText) {
                            // ç«‹å³æ›´æ–°UI
                            item.element.innerHTML = translatedText;
                            item.element.classList.add('translated-content');
                            item.element.style.opacity = '1';
                            item.element.style.backgroundColor = '';
                            successCount++;
                        } else {
                            // ç¿»è¯‘å¤±è´¥ï¼Œæ¢å¤æ ·å¼
                            item.element.style.opacity = '1';
                            item.element.style.backgroundColor = '';
                        }

                        completedCount++;

                        // æ›´æ–°è¿›åº¦
                        showStatus(`å¼‚æ­¥ç¿»è¯‘è¿›åº¦: ${completedCount}/${textsToTranslate.length} (æˆåŠŸ: ${successCount})`, 'loading');

                        return { success: !!translatedText, index };
                    } catch (error) {
                        console.error(`å¼‚æ­¥ç¿»è¯‘ç¬¬ ${index + 1} ä¸ªå…ƒç´ å¤±è´¥:`, error);
                        item.element.style.opacity = '1';
                        item.element.style.backgroundColor = '';
                        completedCount++;
                        return { success: false, index };
                    }
                });

                // ç­‰å¾…æ‰€æœ‰ç¿»è¯‘å®Œæˆ
                await Promise.all(translatePromises);

                // æ˜¾ç¤ºæœ€ç»ˆç»“æœ
                showStatus(`å¼‚æ­¥ç¿»è¯‘å®Œæˆï¼æˆåŠŸ: ${successCount}/${textsToTranslate.length}`, 'success');
                isTranslated = true;
                restoreBtn.style.display = 'inline-block';

            } catch (error) {
                console.error('å¼‚æ­¥ç¿»è¯‘è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:', error);
                showStatus('å¼‚æ­¥ç¿»è¯‘å¤±è´¥: ' + error.message, 'error');
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                translateBtn.disabled = false;
                translateAsyncBtn.disabled = false;
                translateAsyncBtn.innerHTML = 'âš¡ å¼‚æ­¥ç¿»è¯‘ï¼ˆå®æ—¶æ˜¾ç¤ºï¼‰';
            }
        }

        // ç¿»è¯‘å•ä¸ªæ–‡æœ¬ï¼ˆç”¨äºå¼‚æ­¥æ¨¡å¼ï¼‰
        async function translateSingleText(text) {
            try {
                const response = await fetch('/api/translate_to_english', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        text: text
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();

                if (data.trans_result && data.trans_result.length > 0) {
                    return data.trans_result[0].dst;
                } else {
                    return null;
                }
            } catch (error) {
                console.error('å•ä¸ªç¿»è¯‘è¯·æ±‚å¤±è´¥:', error);
                return null;
            }
        }

        // æ¢å¤åŸå§‹å†…å®¹
        function restoreOriginalContent() {
            for (let index in originalContent) {
                const item = originalContent[index];
                item.element.innerHTML = item.originalText;
                item.element.classList.remove('translated-content');
                item.element.style.opacity = '1';
                item.element.style.backgroundColor = '';
            }

            isTranslated = false;
            document.getElementById('restoreBtn').style.display = 'none';
            showStatus('å·²æ¢å¤åŸå§‹ä¸­æ–‡å†…å®¹', 'success');
        }

        // å¼‚æ­¥æ‰¹é‡ç¿»è¯‘æ–‡æœ¬ï¼ˆåˆ†ç»„å¹¶å‘ï¼‰
        async function batchTranslateTexts(texts) {
            const BATCH_SIZE = 10; // æ¯ç»„å¤„ç†10ä¸ªæ–‡æœ¬
            const MAX_CONCURRENT = 3; // æœ€å¤§å¹¶å‘è¯·æ±‚æ•°

            try {
                // å°†æ–‡æœ¬åˆ†ç»„
                const textGroups = [];
                for (let i = 0; i < texts.length; i += BATCH_SIZE) {
                    textGroups.push(texts.slice(i, i + BATCH_SIZE));
                }

                console.log(`å°† ${texts.length} ä¸ªæ–‡æœ¬åˆ†ä¸º ${textGroups.length} ç»„è¿›è¡Œå¹¶å‘ç¿»è¯‘`);

                // å¹¶å‘å¤„ç†åˆ†ç»„
                const results = [];
                for (let i = 0; i < textGroups.length; i += MAX_CONCURRENT) {
                    const currentBatch = textGroups.slice(i, i + MAX_CONCURRENT);

                    // åˆ›å»ºå¹¶å‘è¯·æ±‚
                    const promises = currentBatch.map(group => translateGroup(group));

                    // ç­‰å¾…å½“å‰æ‰¹æ¬¡å®Œæˆ
                    const batchResults = await Promise.all(promises);

                    console.log(`æ‰¹æ¬¡ ${Math.floor(i/MAX_CONCURRENT) + 1} å®Œæˆï¼Œç»“æœ:`, batchResults);

                    // åˆå¹¶ç»“æœ
                    batchResults.forEach((groupResult, groupIndex) => {
                        console.log(`åˆå¹¶åˆ†ç»„ ${groupIndex + 1} ç»“æœ:`, groupResult);
                        if (groupResult && Array.isArray(groupResult)) {
                            // è¿‡æ»¤æ‰nullå€¼ï¼Œåªä¿ç•™æœ‰æ•ˆçš„ç¿»è¯‘ç»“æœ
                            const validResults = groupResult.filter(result => result !== null && result !== undefined && result.trim() !== '');
                            results.push(...groupResult); // ä¿æŒåŸå§‹æ•°ç»„ç»“æ„ï¼ŒåŒ…æ‹¬nullå€¼
                        } else {
                            console.error(`åˆ†ç»„ ${groupIndex + 1} ç»“æœæ ¼å¼é”™è¯¯:`, groupResult);
                            // æ·»åŠ ç©ºç»“æœå ä½ï¼Œä¿æŒç´¢å¼•å¯¹åº”å…³ç³»
                            const groupSize = currentBatch[groupIndex] ? currentBatch[groupIndex].length : 0;
                            results.push(...new Array(groupSize).fill(null));
                        }
                    });

                    // æ›´æ–°è¿›åº¦
                    const progress = Math.min(results.length, texts.length);
                    showStatus(`ç¿»è¯‘è¿›åº¦: ${progress}/${texts.length}`, 'loading');
                }

                return results;

            } catch (error) {
                console.error('å¼‚æ­¥æ‰¹é‡ç¿»è¯‘å¤±è´¥:', error);
                throw error;
            }
        }

        // ç¿»è¯‘å•ä¸ªåˆ†ç»„
        async function translateGroup(texts) {
            try {
                // å°†æ–‡æœ¬è½¬æ¢ä¸ºæ‰¹é‡ç¿»è¯‘æ¥å£éœ€è¦çš„æ ¼å¼
                const items = texts.map((text, index) => ({
                    text: text,
                    id: `item_${index}`
                }));

                const response = await fetch('/api/batch/translate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        items: items,
                        from_lang: 'zh',
                        to_lang: 'en'
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();

                // æ·»åŠ è°ƒè¯•ä¿¡æ¯
                console.log('æ‰¹é‡ç¿»è¯‘å“åº”æ•°æ®:', data);

                if (data.results && Array.isArray(data.results)) {
                    return data.results.map(result => {
                        console.log('å¤„ç†ç¿»è¯‘ç»“æœ:', result);
                        if (result.trans_result && result.trans_result.length > 0) {
                            return result.trans_result[0].dst;
                        }
                        return null;
                    });
                } else {
                    console.error('å“åº”æ•°æ®æ ¼å¼ä¸æ­£ç¡®:', data);
                    throw new Error('åˆ†ç»„ç¿»è¯‘ç»“æœæ ¼å¼é”™è¯¯: ' + JSON.stringify(data));
                }
            } catch (error) {
                console.error('åˆ†ç»„ç¿»è¯‘è¯·æ±‚å¤±è´¥:', error);
                // è¿”å›ç©ºç»“æœè€Œä¸æ˜¯æŠ›å‡ºé”™è¯¯ï¼Œé¿å…å½±å“å…¶ä»–åˆ†ç»„
                return new Array(texts.length).fill(null);
            }
        }

        // æ£€æŸ¥æ–‡æœ¬æ˜¯å¦åŒ…å«ä¸­æ–‡
        function containsChinese(text) {
            return /[\u4e00-\u9fa5]/.test(text);
        }

        // æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯
        function showStatus(message, type) {
            const statusDiv = document.getElementById('translationStatus');
            statusDiv.textContent = message;
            statusDiv.className = `translation-status status-${type}`;

            // 3ç§’åæ¸…é™¤æˆåŠŸçŠ¶æ€
            if (type === 'success') {
                setTimeout(() => {
                    statusDiv.textContent = '';
                    statusDiv.className = 'translation-status';
                }, 3000);
            }
        }

        // æŸ¥çœ‹æºç åŠŸèƒ½ï¼ˆæ˜¾ç¤ºç¡®è®¤å¼¹çª—ï¼‰
        function viewSourceCode() {
            const confirmModal = document.getElementById('confirmModal');
            confirmModal.style.display = 'flex';

            // é˜²æ­¢é¡µé¢æ»šåŠ¨
            document.body.style.overflow = 'hidden';
        }

        // ç¡®è®¤æŸ¥çœ‹æºç 
        function confirmViewSource() {
            const confirmModal = document.getElementById('confirmModal');
            const sourceViewer = document.getElementById('sourceViewer');
            const sourceCode = document.getElementById('sourceCode');

            // éšè—ç¡®è®¤å¼¹çª—
            confirmModal.style.display = 'none';

            try {
                // è·å–å®Œæ•´çš„HTMLæºç 
                const htmlSource = document.documentElement.outerHTML;

                // æ ¼å¼åŒ–HTMLæºç 
                const formattedHtml = formatHtml(htmlSource);

                // æ˜¾ç¤ºæºç 
                sourceCode.textContent = formattedHtml;
                sourceViewer.style.display = 'block';

            } catch (error) {
                console.error('æ ¼å¼åŒ–HTMLæ—¶å‡ºé”™:', error);

                // å¦‚æœæ ¼å¼åŒ–å¤±è´¥ï¼Œæ˜¾ç¤ºåŸå§‹HTML
                const htmlSource = document.documentElement.outerHTML;
                sourceCode.textContent = htmlSource;
                sourceViewer.style.display = 'block';
            }
        }

        // å–æ¶ˆæŸ¥çœ‹æºç 
        function cancelViewSource() {
            const confirmModal = document.getElementById('confirmModal');
            confirmModal.style.display = 'none';

            // æ¢å¤é¡µé¢æ»šåŠ¨
            document.body.style.overflow = 'auto';
        }

        // å…³é—­æºç æŸ¥çœ‹å™¨
        function closeSourceViewer() {
            const sourceViewer = document.getElementById('sourceViewer');
            sourceViewer.style.display = 'none';

            // æ¢å¤é¡µé¢æ»šåŠ¨
            document.body.style.overflow = 'auto';
        }

        // å¤åˆ¶æºç åˆ°å‰ªè´´æ¿
        async function copySourceCode() {
            const sourceCode = document.getElementById('sourceCode');
            const text = sourceCode.textContent;

            try {
                await navigator.clipboard.writeText(text);

                // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
                const copyBtn = document.querySelector('.copy-btn');
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'âœ… å·²å¤åˆ¶';
                copyBtn.style.background = '#28a745';

                setTimeout(() => {
                    copyBtn.textContent = originalText;
                    copyBtn.style.background = '#007acc';
                }, 2000);

            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬å¤åˆ¶');
            }
        }

        // ç®€å•çš„HTMLæ ¼å¼åŒ–å‡½æ•°
        function formatHtml(html) {
            let formatted = '';
            let indent = 0;
            const tab = '    '; // 4ä¸ªç©ºæ ¼ä½œä¸ºç¼©è¿›

            // ç§»é™¤å¤šä½™çš„ç©ºç™½å­—ç¬¦å¹¶åˆ†è¡Œ
            html = html.replace(/>\s*</g, '>\n<');
            const lines = html.split('\n');

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;

                // æ£€æŸ¥æ˜¯å¦æ˜¯ç»“æŸæ ‡ç­¾
                if (line.match(/^<\/\w/)) {
                    // ç»“æŸæ ‡ç­¾ï¼Œå…ˆå‡å°‘ç¼©è¿›å†è¾“å‡º
                    indent = Math.max(0, indent - 1);
                    formatted += tab.repeat(indent) + line + '\n';
                } else if (line.match(/^<\w[^>]*\/>$/)) {
                    // è‡ªé—­åˆæ ‡ç­¾ï¼Œä¸æ”¹å˜ç¼©è¿›
                    formatted += tab.repeat(indent) + line + '\n';
                } else if (line.match(/^<\w[^>]*>$/)) {
                    // å¼€å§‹æ ‡ç­¾ï¼Œå…ˆè¾“å‡ºå†å¢åŠ ç¼©è¿›
                    formatted += tab.repeat(indent) + line + '\n';
                    indent++;
                } else if (line.match(/^<!/)) {
                    // DOCTYPEã€æ³¨é‡Šç­‰ï¼Œä¸æ”¹å˜ç¼©è¿›
                    formatted += tab.repeat(indent) + line + '\n';
                } else if (line.match(/^</)) {
                    // å…¶ä»–æ ‡ç­¾
                    formatted += tab.repeat(indent) + line + '\n';
                } else {
                    // æ–‡æœ¬å†…å®¹
                    formatted += tab.repeat(indent) + line + '\n';
                }
            }

            return formatted;
        }

        // é”®ç›˜å¿«æ·é”®æ”¯æŒ
        document.addEventListener('keydown', function(e) {
            // Ctrl+U æˆ– Cmd+U æŸ¥çœ‹æºç 
            if ((e.ctrlKey || e.metaKey) && e.key === 'u') {
                e.preventDefault();
                viewSourceCode();
            }

            // ESC å…³é—­å¼¹çª—å’Œæºç æŸ¥çœ‹å™¨
            if (e.key === 'Escape') {
                const confirmModal = document.getElementById('confirmModal');
                const sourceViewer = document.getElementById('sourceViewer');

                if (confirmModal.style.display === 'flex') {
                    cancelViewSource();
                } else if (sourceViewer.style.display === 'block') {
                    closeSourceViewer();
                }
            }

            // Enter ç¡®è®¤æŸ¥çœ‹æºç ï¼ˆå½“ç¡®è®¤å¼¹çª—æ˜¾ç¤ºæ—¶ï¼‰
            if (e.key === 'Enter') {
                const confirmModal = document.getElementById('confirmModal');
                if (confirmModal.style.display === 'flex') {
                    confirmViewSource();
                }
            }
        });

        // ç‚¹å‡»èƒŒæ™¯å…³é—­ç¡®è®¤å¼¹çª—
        document.getElementById('confirmModal').addEventListener('click', function(e) {
            if (e.target === this) {
                cancelViewSource();
            }
        });

        // ç‚¹å‡»èƒŒæ™¯å…³é—­æºç æŸ¥çœ‹å™¨
        document.getElementById('sourceViewer').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSourceViewer();
            }
        });

    </script>
</body>
</html>
