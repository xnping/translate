<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•æ„Ÿè¯ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
            padding: 25px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .table th,
        .table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }

        .table tr:hover {
            background: #f5f5f5;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
            gap: 10px;
        }

        .page-btn {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .page-btn:hover,
        .page-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            font-weight: 500;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 1.1em;
        }



        .batch-actions {
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .checkbox {
            margin-right: 10px;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›¡ï¸ æ•æ„Ÿè¯ç®¡ç†ç³»ç»Ÿ</h1>
            <p>é«˜æ•ˆç®¡ç†å’Œæ£€æµ‹æ•æ„Ÿè¯å†…å®¹</p>
        </div>

        <div class="main-content">
            <!-- ç»Ÿè®¡ä¿¡æ¯ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalWords">-</div>
                    <div class="stat-label">æ€»æ•æ„Ÿè¯æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayAdded">-</div>
                    <div class="stat-label">ä»Šæ—¥æ–°å¢</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="lastUpdate">-</div>
                    <div class="stat-label">æœ€è¿‘æ›´æ–°</div>
                </div>
            </div>

            <!-- æ¶ˆæ¯æç¤º -->
            <div id="alertContainer"></div>

            <!-- æ·»åŠ æ•æ„Ÿè¯ -->
            <div class="section">
                <h2>â• æ·»åŠ æ•æ„Ÿè¯</h2>
                <div class="form-group">
                    <label for="newWord">æ•æ„Ÿè¯å†…å®¹ï¼š</label>
                    <input type="text" id="newWord" class="form-control" placeholder="è¯·è¾“å…¥æ•æ„Ÿè¯å†…å®¹">
                </div>
                <button class="btn btn-primary" onclick="addWord()">æ·»åŠ æ•æ„Ÿè¯</button>
                <button class="btn btn-success" onclick="showBatchAddModal()">æ‰¹é‡æ·»åŠ </button>
            </div>



            <!-- æ•æ„Ÿè¯åˆ—è¡¨ -->
            <div class="section">
                <h2>ğŸ“‹ æ•æ„Ÿè¯åˆ—è¡¨</h2>
                
                <!-- æ‰¹é‡æ“ä½œ -->

                <div class="batch-actions">
                    <input type="checkbox" id="selectAll" class="checkbox" onchange="toggleSelectAll()">
                    <label for="selectAll">å…¨é€‰</label>
                    <button class="btn btn-danger" onclick="batchDeleteWords()">æ‰¹é‡åˆ é™¤</button>
                    <span id="selectedCount">å·²é€‰æ‹©: 0 é¡¹</span>
                </div>

                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th width="50">é€‰æ‹©</th>
                                <th width="80">ID</th>
                                <th>æ•æ„Ÿè¯å†…å®¹</th>
                                <th width="200">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="wordsTableBody">
                            <tr>
                                <td colspan="4" class="loading">æ­£åœ¨åŠ è½½æ•°æ®...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- åˆ†é¡µ -->
                <div class="pagination" id="pagination"></div>
            </div>
        </div>
    </div>

    <!-- æ‰¹é‡æ·»åŠ æ¨¡æ€æ¡† -->
    <div id="batchAddModal" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; display: none; align-items: center; justify-content: center;">
        <div style="background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <h3 style="margin-bottom: 20px;">æ‰¹é‡æ·»åŠ æ•æ„Ÿè¯</h3>
            <div class="form-group">
                <label for="batchWords">æ•æ„Ÿè¯åˆ—è¡¨ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰ï¼š</label>
                <textarea id="batchWords" class="form-control" rows="8" placeholder="è¯·è¾“å…¥æ•æ„Ÿè¯ï¼Œæ¯è¡Œä¸€ä¸ª"></textarea>
            </div>
            <div style="text-align: right;">
                <button class="btn btn-primary" onclick="batchAddWords()">ç¡®è®¤æ·»åŠ </button>
                <button class="btn" onclick="closeBatchAddModal()" style="background: #ccc;">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentPage = 1;
        let pageSize = 10;
        let totalPages = 1;
        let selectedWords = new Set();

        // APIåŸºç¡€URL
        const API_BASE = '/api/words';

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadStats();
            loadWords();



            // æ–°å¢æ•æ„Ÿè¯å›è½¦äº‹ä»¶
            document.getElementById('newWord').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addWord();
                }
            });
        });

        // æ˜¾ç¤ºæ¶ˆæ¯æç¤º
        function showAlert(message, type = 'info') {
            const alertContainer = document.getElementById('alertContainer');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;

            alertContainer.innerHTML = '';
            alertContainer.appendChild(alertDiv);

            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }

        // åŠ è½½ç»Ÿè®¡ä¿¡æ¯
        async function loadStats() {
            try {
                const response = await fetch(`${API_BASE}/stats/summary`);
                const result = await response.json();

                if (result.success) {
                    document.getElementById('totalWords').textContent = result.data.total_words;
                    document.getElementById('todayAdded').textContent = '0'; // å¯ä»¥åç»­æ·»åŠ 
                    document.getElementById('lastUpdate').textContent = 'åˆšåˆš';
                }
            } catch (error) {
                console.error('åŠ è½½ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:', error);
            }
        }

        // åŠ è½½æ•æ„Ÿè¯åˆ—è¡¨
        async function loadWords(page = 1) {
            try {
                currentPage = page;
                const url = `${API_BASE}/?page=${page}&page_size=${pageSize}`;
                const response = await fetch(url);
                const result = await response.json();

                if (result.success) {
                    displayWords(result.data);
                    updatePagination(result.total, result.page, result.page_size);
                    loadStats(); // æ›´æ–°ç»Ÿè®¡
                } else {
                    showAlert('åŠ è½½æ•æ„Ÿè¯åˆ—è¡¨å¤±è´¥', 'error');
                }
            } catch (error) {
                console.error('åŠ è½½æ•æ„Ÿè¯åˆ—è¡¨å¤±è´¥:', error);
                showAlert('ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥', 'error');
            }
        }

        // æ˜¾ç¤ºæ•æ„Ÿè¯åˆ—è¡¨
        function displayWords(words) {
            const tbody = document.getElementById('wordsTableBody');

            if (words.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align: center; color: #666;">æš‚æ— æ•°æ®</td></tr>';
                return;
            }

            tbody.innerHTML = words.map(word => `
                <tr>
                    <td>
                        <input type="checkbox" class="word-checkbox" value="${word.id}" onchange="updateSelectedCount()">
                    </td>
                    <td>${word.id}</td>
                    <td>
                        <span id="word-${word.id}">${escapeHtml(word.words)}</span>
                        <input type="text" id="edit-${word.id}" value="${escapeHtml(word.words)}" class="form-control hidden">
                    </td>
                    <td>
                        <button class="btn btn-warning" onclick="editWord(${word.id})" id="edit-btn-${word.id}">ç¼–è¾‘</button>
                        <button class="btn btn-success hidden" onclick="saveWord(${word.id})" id="save-btn-${word.id}">ä¿å­˜</button>
                        <button class="btn" onclick="cancelEdit(${word.id})" id="cancel-btn-${word.id}" style="background: #ccc; display: none;">å–æ¶ˆ</button>
                        <button class="btn btn-danger" onclick="deleteWord(${word.id})">åˆ é™¤</button>
                    </td>
                </tr>
            `).join('');

            // é‡ç½®é€‰æ‹©çŠ¶æ€
            selectedWords.clear();
            document.getElementById('selectAll').checked = false;
            updateSelectedCount();
        }

        // HTMLè½¬ä¹‰
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // æ›´æ–°åˆ†é¡µ
        function updatePagination(total, page, pageSize) {
            totalPages = Math.ceil(total / pageSize);
            const pagination = document.getElementById('pagination');

            let paginationHtml = '';

            // ä¸Šä¸€é¡µ
            if (page > 1) {
                paginationHtml += `<button class="page-btn" onclick="loadWords(${page - 1})">ä¸Šä¸€é¡µ</button>`;
            }

            // é¡µç 
            for (let i = Math.max(1, page - 2); i <= Math.min(totalPages, page + 2); i++) {
                paginationHtml += `<button class="page-btn ${i === page ? 'active' : ''}" onclick="loadWords(${i})">${i}</button>`;
            }

            // ä¸‹ä¸€é¡µ
            if (page < totalPages) {
                paginationHtml += `<button class="page-btn" onclick="loadWords(${page + 1})">ä¸‹ä¸€é¡µ</button>`;
            }

            pagination.innerHTML = paginationHtml;
        }



        // æ·»åŠ æ•æ„Ÿè¯
        async function addWord() {
            const wordInput = document.getElementById('newWord');
            const word = wordInput.value.trim();

            if (!word) {
                showAlert('è¯·è¾“å…¥æ•æ„Ÿè¯å†…å®¹', 'error');
                return;
            }

            try {
                const response = await fetch(API_BASE + '/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ words: word })
                });

                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        showAlert('æ•æ„Ÿè¯æ·»åŠ æˆåŠŸ', 'success');
                        wordInput.value = '';
                        loadWords(currentPage);
                    } else {
                        showAlert(result.message || 'æ·»åŠ å¤±è´¥', 'error');
                    }
                } else {
                    // å¤„ç†HTTPé”™è¯¯çŠ¶æ€
                    const errorData = await response.json();
                    showAlert(errorData.detail || `æ·»åŠ å¤±è´¥ (${response.status})`, 'error');
                }
            } catch (error) {
                console.error('æ·»åŠ æ•æ„Ÿè¯å¤±è´¥:', error);
                showAlert('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
            }
        }

        // ç¼–è¾‘æ•æ„Ÿè¯
        function editWord(id) {
            document.getElementById(`word-${id}`).classList.add('hidden');
            document.getElementById(`edit-${id}`).classList.remove('hidden');
            document.getElementById(`edit-btn-${id}`).classList.add('hidden');
            document.getElementById(`save-btn-${id}`).classList.remove('hidden');
            document.getElementById(`cancel-btn-${id}`).style.display = 'inline-block';
        }

        // å–æ¶ˆç¼–è¾‘
        function cancelEdit(id) {
            document.getElementById(`word-${id}`).classList.remove('hidden');
            document.getElementById(`edit-${id}`).classList.add('hidden');
            document.getElementById(`edit-btn-${id}`).classList.remove('hidden');
            document.getElementById(`save-btn-${id}`).classList.add('hidden');
            document.getElementById(`cancel-btn-${id}`).style.display = 'none';
        }

        // ä¿å­˜æ•æ„Ÿè¯
        async function saveWord(id) {
            const newWord = document.getElementById(`edit-${id}`).value.trim();

            if (!newWord) {
                showAlert('æ•æ„Ÿè¯å†…å®¹ä¸èƒ½ä¸ºç©º', 'error');
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ words: newWord })
                });

                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        showAlert('æ•æ„Ÿè¯æ›´æ–°æˆåŠŸ', 'success');
                        loadWords(currentPage);
                    } else {
                        showAlert(result.message || 'æ›´æ–°å¤±è´¥', 'error');
                    }
                } else {
                    const errorData = await response.json();
                    showAlert(errorData.detail || `æ›´æ–°å¤±è´¥ (${response.status})`, 'error');
                }
            } catch (error) {
                console.error('æ›´æ–°æ•æ„Ÿè¯å¤±è´¥:', error);
                showAlert('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
            }
        }

        // åˆ é™¤æ•æ„Ÿè¯
        async function deleteWord(id) {
            if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ•æ„Ÿè¯å—ï¼Ÿ')) {
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/${id}`, {
                    method: 'DELETE'
                });

                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        showAlert('æ•æ„Ÿè¯åˆ é™¤æˆåŠŸ', 'success');
                        loadWords(currentPage);
                    } else {
                        showAlert(result.message || 'åˆ é™¤å¤±è´¥', 'error');
                    }
                } else {
                    const errorData = await response.json();
                    showAlert(errorData.detail || `åˆ é™¤å¤±è´¥ (${response.status})`, 'error');
                }
            } catch (error) {
                console.error('åˆ é™¤æ•æ„Ÿè¯å¤±è´¥:', error);
                showAlert('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
            }
        }

        // å…¨é€‰/å–æ¶ˆå…¨é€‰
        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll');
            const checkboxes = document.querySelectorAll('.word-checkbox');

            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
                if (selectAll.checked) {
                    selectedWords.add(parseInt(checkbox.value));
                } else {
                    selectedWords.delete(parseInt(checkbox.value));
                }
            });

            updateSelectedCount();
        }

        // æ›´æ–°é€‰ä¸­æ•°é‡
        function updateSelectedCount() {
            const checkboxes = document.querySelectorAll('.word-checkbox:checked');
            selectedWords.clear();

            checkboxes.forEach(checkbox => {
                selectedWords.add(parseInt(checkbox.value));
            });

            document.getElementById('selectedCount').textContent = `å·²é€‰æ‹©: ${selectedWords.size} é¡¹`;

            // æ›´æ–°å…¨é€‰çŠ¶æ€
            const allCheckboxes = document.querySelectorAll('.word-checkbox');
            const selectAll = document.getElementById('selectAll');
            selectAll.checked = allCheckboxes.length > 0 && checkboxes.length === allCheckboxes.length;
        }

        // æ‰¹é‡åˆ é™¤
        async function batchDeleteWords() {
            if (selectedWords.size === 0) {
                showAlert('è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„æ•æ„Ÿè¯', 'error');
                return;
            }

            if (!confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${selectedWords.size} ä¸ªæ•æ„Ÿè¯å—ï¼Ÿ`)) {
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/batch/delete`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ word_ids: Array.from(selectedWords) })
                });

                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        showAlert(`æ‰¹é‡åˆ é™¤å®Œæˆ: æˆåŠŸ${result.data.success_count}ä¸ªï¼Œå¤±è´¥${result.data.failed_count}ä¸ª`, 'success');
                        loadWords(currentPage);
                    } else {
                        showAlert('æ‰¹é‡åˆ é™¤å¤±è´¥', 'error');
                    }
                } else {
                    const errorData = await response.json();
                    showAlert(errorData.detail || `æ‰¹é‡åˆ é™¤å¤±è´¥ (${response.status})`, 'error');
                }
            } catch (error) {
                console.error('æ‰¹é‡åˆ é™¤å¤±è´¥:', error);
                showAlert('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
            }
        }

        // æ˜¾ç¤ºæ‰¹é‡æ·»åŠ æ¨¡æ€æ¡†
        function showBatchAddModal() {
            document.getElementById('batchAddModal').style.display = 'flex';
        }

        // å…³é—­æ‰¹é‡æ·»åŠ æ¨¡æ€æ¡†
        function closeBatchAddModal() {
            document.getElementById('batchAddModal').style.display = 'none';
            document.getElementById('batchWords').value = '';
        }

        // æ‰¹é‡æ·»åŠ æ•æ„Ÿè¯
        async function batchAddWords() {
            const batchText = document.getElementById('batchWords').value.trim();

            if (!batchText) {
                showAlert('è¯·è¾“å…¥æ•æ„Ÿè¯å†…å®¹', 'error');
                return;
            }

            const wordsList = batchText.split('\n').map(word => word.trim()).filter(word => word);

            if (wordsList.length === 0) {
                showAlert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ•æ„Ÿè¯å†…å®¹', 'error');
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/batch`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ words_list: wordsList })
                });

                const result = await response.json();

                if (result.success) {
                    showAlert(`æ‰¹é‡æ·»åŠ å®Œæˆ: æˆåŠŸ${result.data.success_count}ä¸ªï¼Œå¤±è´¥${result.data.failed_count}ä¸ª`, 'success');
                    closeBatchAddModal();
                    loadWords(currentPage);
                } else {
                    showAlert('æ‰¹é‡æ·»åŠ å¤±è´¥', 'error');
                }
            } catch (error) {
                console.error('æ‰¹é‡æ·»åŠ å¤±è´¥:', error);
                showAlert('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
            }
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('batchAddModal');
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeBatchAddModal();
                }
            });
        });
    </script>
</body>
</html>
